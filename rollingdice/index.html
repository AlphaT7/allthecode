<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>RPG Dice Simulation</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
  <meta name="description" content="RPG Dice Simulation in Javascript">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebApplication",
      "name": "Javascript RPG Dice Simulation",
      "applicationCategory": "Game",
      "about": "A chart showing probability of a given outcome for RPG player/npc damage. Includes critical stikes and armor reduction.",
      "author": "Jamison Winters",
      "isBasedOn": "https://www.redblobgames.com/articles/probability/damage-rolls.html",
      "url": "http://dice.surge.sh/",
      "screenshot": "http://dice.surge.sh/img/screenshot.png",
      "operatingSystem": "Windows, Mac, Linux"
    }
  </script>
</head>

<body>
  <div id="header">
    <h1>
      RPG Dice Simulation in Javascript
    </h1>
  </div>
  <form id="form">
    <input id="dice" type="number" placeholder="number of dice" min="1" max="10" value="2" required/>
    <input id="sides" type="number" placeholder="sides per die" min="1" max="12" value="6" required/>
    <input id="critical" type="number" placeholder="critical bonus" min="0" max="200" value="0" required/>
    <input id="reduction" type="number" placeholder="damage modifier" min="0" max="100" value="0" required/>
    <input type="submit" id="roll" value="Roll" />
    <br>
    <canvas id="myChart" width="400" height="200"></canvas>
  </form>
  <section id="container">
    <p>
      This is an RPG dice simulation chart that shows the probability of hitting a given dice combination within a 1000 rolls.
      The chart utalizes
      <a href="http://www.chartjs.org/">ChartJS</a> and
      <a href="https://jquery.com/">jQuery</a>.
    </p>
    <p>
      The core probability function is written in javascript and is loosly based on the pseudo code provided by
      <a href="https://www.redblobgames.com/articles/probability/damage-rolls.html">RedBlobGames</a>.
    </p>
    <div id="code">
      <code>

        const getDamage = function(dice, sides, critical, reduction) {<br><br>
        &nbsp;&nbsp;const thisDamage = function(dice, sides, critical, reduction) {<br><br>
        &nbsp;&nbsp;&nbsp;&nbsp;this.damage = 0;<br><br>
      
        &nbsp;&nbsp;&nbsp;&nbsp;this.rollDice = function() {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (let i = 0; i < dice; i++) {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.damage += this.random(sides) + 1;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;};<br><br>

        &nbsp;&nbsp;&nbsp;&nbsp;this.random = function(S) {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Math.floor(S * Math.random());<br>
        &nbsp;&nbsp;&nbsp;&nbsp;};<br><br>
            
        &nbsp;&nbsp;&nbsp;&nbsp;this.critical = function() {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (this.random(100) < critical) {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.damage += this.rollDice(dice, sides).damage;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;};<br><br>

        &nbsp;&nbsp;&nbsp;&nbsp;this.reduction = function() {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.damage = this.damage + Math.ceil(this.damage * reduction * -0.01);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;};<br>
        &nbsp;&nbsp;};<br><br>

        &nbsp;&nbsp;return new thisDamage(dice, sides, critical, reduction)<br>
        &nbsp;&nbsp;&nbsp;.rollDice()<br>
        &nbsp;&nbsp;&nbsp;.critical()<br>
        &nbsp;&nbsp;&nbsp;.reduction()<br>
        &nbsp;&nbsp;&nbsp;.damage;<br>
        &nbsp;&nbsp;};<br><br>
<!--
        function getDamage (D, S, C, A) {<br><br>

        &nbsp;&nbsp;function random(S) {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;return Math.floor(S * Math.random());<br>
        &nbsp;&nbsp;}<br><br>
        &nbsp;&nbsp;function rollDice(D, S) {<br><br>
        &nbsp;&nbsp;&nbsp;&nbsp;let roll = 0;<br><br>
        &nbsp;&nbsp;&nbsp;&nbsp;for (let i = 0; i < D; i++) {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roll += random(S) + 1;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;}<br><br>
        &nbsp;&nbsp;&nbsp;&nbsp;return roll;<br><br>
        &nbsp;&nbsp;}<br><br>
        &nbsp;&nbsp;let damage = rollDice(D,S);<br><br>
        &nbsp;&nbsp;if (random(100) < C) {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;damage += rollDice(D,S);<br>
        &nbsp;&nbsp;}<br><br>
        &nbsp;&nbsp;return (damage + Math.ceil(damage * A * -.01));<br><br>
        
        }<br><br>
-->
        let playerdamage = <br> getDamage(number-of-dice, sides-per-die, critical-strike, armor-reduction);<br>
      </code>
    </div>
  </section>
  <div class="spacer"></div>
  <script src='js/jquery-3.3.1.min.js'></script>
  <script src='js/chartjs-2.7.2.min.js'></script>
  <script src="js/main.js" async></script>

</body>

</html>